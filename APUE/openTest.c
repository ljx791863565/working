#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <string.h>
#include <unistd.h>

#define MAX 1024

int main()
{
	char *str = "1.txt";
	int fd = open(str, O_RDWR | O_CREAT | O_TRUNC, 0660);
	if (fd < 0){
		perror("open");
		return -1;
	}
	char buf[MAX];
	memset(&buf, 0, sizeof(buf));
	strcpy(buf, "helloworld");
	int ret = write(fd, buf, sizeof(buf));
	if (ret < 0){
		perror("write");
		return -1;
	}
	
	//此时文件描述指针指向文件结尾，调用lseek使其指向文件开头
	lseek(fd, 0, 0);
	memset(&buf, 0, sizeof(buf));
	ret = read(fd, buf, sizeof(buf));
	if (ret < 0){
		perror("read");
		return -1;
	}
	printf("%s\n", buf);

	close(fd);
	return 0;
}
